<%- include('../../views/partials/user/header') %>
<link rel="stylesheet" href="/css/user/profile-sidebar.css">

  <!-- Referral Page -->
  <div class="referral-container">
    <h6 class="refferal-head">ðŸŽ‰ Congratulations! ðŸŽ‰</h6>
    <div class="referral-code-container">
      <span class="referral-code" id="referralCode"><%= user.referralCode %></span>
      <button class="share-btn" onclick="shareReferral()">
        <i class="fas fa-rocket share-icon"></i>
      </button>
    </div>
    <p class="stats">Share your referral code with friends and family to earn rewards!</p>

  </div>
</div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti"></script>

  <script>
 
    window.onload = () => {
      confetti({
        particleCount: 100,
        spread: 70,
        origin: { y: 0.6 },
      });
    };

    function shareReferral() {
      const referralCode = document.getElementById("referralCode").innerText;
      navigator.clipboard
        .writeText(`Use my referral code: ${referralCode}`)
        .then(() => {
          
          toastr.success(`Your referral code "${referralCode}" has been copied!`, "Code Copied", {
            closeButton: true,
            progressBar: true,
            timeOut: 3000,
            positionClass: "toast-top-center",
          });
        })
        .catch(() => {
          toastr.error("Failed to copy the referral code. Please try again.", "Error", {
            closeButton: true,
            progressBar: true,
            timeOut: 3000,
            positionClass: "toast-top-center",
          });
        });
    }
  </script>
<%- include('../../views/partials/user/footer') %>